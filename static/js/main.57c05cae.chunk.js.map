{"version":3,"sources":["DrivingHistory.js","Passengers.js","DatePicker.js","FloatingButton.js","PageNewCovoit.js","PageHistory.js","App.js","index.js"],"names":["DrivingHistory","state","covoits","_this2","this","props","then","setState","react_default","a","createElement","id","map","covoit","index","key","shortid","generate","driver","passengers","date","React","Component","Passengers","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","selectedPassengers","Map","name","e","item","target","value","isChecked","checked","prevState","set","onChange","_this3","className","onClick","handleClick","type","get","handleChange","DatePicker","event","FloatingButton","text","PageNewCovoit","Passengers_Passengers","setPassengers","DatePicker_DatePicker","setDate","PageHistory","DrivingHistory_DrivingHistory","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","clientId","scopes","firebase","initializeApp","db","firestore","uiConfig","signInFlow","signInOptions","provider","auth","GoogleAuthProvider","PROVIDER_ID","callbacks","signInSuccessWithAuthResult","App","isSignedIn","isNewCovoit","undefined","unregisterAuthObserver","onAuthStateChanged","user","collection","add","currentUser","displayName","catch","err","console","error","snapshot","docs","doc","data","toConsumableArray","keys","save","_this4","class","signOut","PageNewCovoit_PageNewCovoit","PageHistory_PageHistory","getAllCovoits","StyledFirebaseAuth_default","firebaseAuth","FloatingButton_FloatingButton","concat","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.57c05cae.chunk.js","sourcesContent":["import React from \"react\";\nimport shortid from 'shortid';\n\nimport './DrivingHistory.scss';\n\nexport default class DrivingHistory extends React.Component {\n    state = {\n        covoits: []\n    };\n\n\n    componentDidMount() {\n        this.props.covoits.then(covoits => this.setState({covoits: covoits}))\n    }\n\n    render() {\n        return (\n            <div id=\"mainArticleTop\">\n            <table>\n                <tbody>\n                    <tr>\n                        <th>Driver</th>\n                        <th>Passengers</th>\n                        <th>Date</th>\n                    </tr>\n                    {this.state.covoits.map((covoit, index) => {\n                      return <tr key={shortid.generate()}>\n                          <td>{covoit.driver}</td>\n                          <td>{covoit.passengers}</td>\n                          <td>{covoit.date}</td>\n                      </tr>\n                    })}\n                </tbody>\n            </table>\n            </div>\n        );\n    }\n}\n","import React from \"react\";\nimport './Passengers.scss'\nimport shortid from \"shortid\";\n\nexport default class Passengers extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            passengers: [\"Fedy\", \"Flo\", \"Lucille\", \"Spencer\", \"Baptiste\"],\n            selectedPassengers: new Map()\n        };\n    }\n\n    handleClick(name) {\n        //TODO : enlarge radio button to the div\n        //this.props.onChange(this.props.id, val);\n    }\n\n    handleChange(e) {\n        const item = e.target.value;\n        const isChecked = e.target.checked;\n        this.setState(prevState => ({selectedPassengers: prevState.selectedPassengers.set(item, isChecked)}),\n            () => this.props.onChange(this.state.selectedPassengers));\n    }\n\n    render() {\n        return (\n            <div className=\"flexRow\">\n                {this.state.passengers.map((value, index) =>{\n                  return <div className=\"passenger\" key={shortid.generate()} onClick={() => this.handleClick(value)}>\n                      <p>{value}</p>\n                      <input\n                          type=\"checkbox\"\n                          name=\"passenger\"\n                          value={value}\n                          checked={this.state.selectedPassengers.get(value) ? this.state.selectedPassengers.get(value) : false}\n                          onChange={(e) => this.handleChange(e)}\n                      />\n                  </div>\n                })}\n            </div>\n        );\n    }\n}\n","import React from \"react\";\n\nexport default class DatePicker extends React.Component {\n    render() {\n        return (\n            <div className=\"flexRow\">\n                <input type=\"date\" onChange={event => this.props.onChange(event.target.value) }/>\n            </div>\n        );\n    }\n}\n","import React from \"react\";\nimport './FloatingButton.scss';\n\nexport default class FloatingButton extends React.Component {\n    render() {\n        return (\n            <div\n                 className=\"float\"\n                 onClick={this.props.onClick}\n                 >\n                {this.props.text}\n            </div>\n        );\n    }\n}\n","import React from \"react\";\n\nimport Passengers from \"./Passengers\";\nimport DatePicker from \"./DatePicker\";\n\nimport './PageNewCovoit.scss'\n\nexport default class PageNewCovoit extends React.Component {\n    render() {\n        return (\n            <div className=\"flexColumn\">\n                <Passengers onChange={(selectedPassengers) => this.props.setPassengers(selectedPassengers)}/>\n                <DatePicker onChange={(date) => this.props.setDate(date)}/>\n            </div>\n        );\n    }\n}\n\n\n","import React from \"react\";\nimport DrivingHistory from \"./DrivingHistory\";\n\nexport default class PageHistory extends React.Component {\n    render() {\n        return (\n            <div>\n                <DrivingHistory covoits={this.props.covoits}/>\n            </div>\n        );\n    }\n}\n","// Import FirebaseAuth and firebase.\nimport React from \"react\";\nimport firebase from \"firebase\";\nimport \"firebase/firestore\";\nimport StyledFirebaseAuth from \"react-firebaseui/StyledFirebaseAuth\";\n\n\nimport DrivingHistory from \"./DrivingHistory\";\nimport Passengers from \"./Passengers\"\nimport './global.scss'\nimport DatePicker from \"./DatePicker\";\nimport FloatingButton from \"./FloatingButton\";\nimport PageNewCovoit from \"./PageNewCovoit\";\nimport PageHistory from \"./PageHistory\";\n\n\n// Configure Firebase.\nconst config = {\n    apiKey: \"AIzaSyBjsGZ5tLUZN9xlMVRoRsxLc0CjvOaL8oI\",\n    authDomain: \"covoit-84ccd.firebaseapp.com\",\n    databaseURL: \"https://covoit-84ccd.firebaseio.com\",\n    projectId: \"covoit-84ccd\",\n    storageBucket: \"\",\n    messagingSenderId: \"913586747610\",\n    appId: \"1:913586747610:web:0c6a504f06e498b42f4de3\",\n    measurementId: \"G-589J4F6WQJ\",\n    clientId:\n        \"424398156280-ia1vh1s44b7qqvm5kk61a5gako72kvb9.apps.googleusercontent.com\",\n    scopes: [\n        \"email\",\n        \"profile\",\n        \"openid\"\n    ]\n};\n\n\nfirebase.initializeApp(config);\nconst db = firebase.firestore();\n\n// Configure FirebaseUI.\nconst uiConfig = {\n    // Popup signin flow rather than redirect flow.\n    signInFlow: \"popup\",\n    // Redirect to /signedIn after sign in is successful. Alternatively you can provide a callbacks.signInSuccess function.\n    //signInSuccessUrl: \"/signedIn\",\n    // We will display Google and Facebook as auth providers.\n    signInOptions: [\n        {\n            provider: firebase.auth.GoogleAuthProvider.PROVIDER_ID,\n            scopes: config.scopes\n        }\n    ],\n    callbacks: {\n        signInSuccessWithAuthResult: () => false\n    }\n};\n\nclass App extends React.Component {\n    state = {\n        isSignedIn: false,\n        isNewCovoit: false,\n        selectedPassengers: [],\n        date: undefined\n    };\n\n    componentDidMount() {\n        this.unregisterAuthObserver = firebase.auth().onAuthStateChanged(user => {\n            if (user) {\n                this.setState({isSignedIn: true});\n            } else {\n                this.setState({isSignedIn: false});\n            }\n        });\n    }\n\n    componentWillUnmount() {\n        this.unregisterAuthObserver();\n    }\n\n    save(){\n        //Send data to firebase\n        db.collection(\"covoits\")\n            .add({\n                driver: firebase.auth().currentUser.displayName,\n                passengers: this.state.selectedPassengers,\n                date: this.state.date\n            }).then(() => {\n                this.setState({isNewCovoit: false})\n            }).catch(err => {\n                console.error('Error adding document', err);\n            });\n    }\n\n    getAllCovoits() {\n        const covoits = db.collection('covoits').get()\n            .then(snapshot => {\n                return snapshot.docs.map(doc => {\n                    return doc.data();\n                });\n            }).catch(err => {\n                console.error('Error getting documents', err);\n            });\n\n        return covoits\n    }\n\n    setPassengers(selectedPassengers){\n        this.setState({selectedPassengers: [...selectedPassengers.keys()]})\n    }\n\n    setDate(date) {\n        this.setState({date: date})\n    }\n\n    handleClick(){\n        if(this.state.isNewCovoit){\n            this.save()\n        }\n        else\n            this.setState({isNewCovoit : true})\n    }\n\n    render() {\n        return (<div class=\"grid\">\n            <div id=\"header\">                   \n                <h1>Covoit App</h1>\n            </div>\n            <div id=\"headerRight\">\n                {this.state.isNewCovoit &&\n                            <button\n                                \n                                onClick={() => firebase.auth().signOut()}\n                            >\n                                Sign-out\n                            </button>\n                }\n            </div>\n            <div id=\"mainArticle\">\n                {this.state.isSignedIn ? (\n                    <div>\n                        {this.state.isNewCovoit ?\n                            <PageNewCovoit\n                                setPassengers={(data) => this.setPassengers(data)}\n                                setDate={(data) => this.setDate(data)}\n                            />\n                            :\n                            <PageHistory covoits={this.getAllCovoits()}/>\n                        }\n                    </div>\n                ) : (\n                    <StyledFirebaseAuth\n                        uiConfig={uiConfig}\n                        firebaseAuth={firebase.auth()}\n                    />\n                )}\n            </div>\n            <nav id=\"mainNav\">Nav</nav>\n            <div id=\"siteAds\">Ads</div>\n            <footer id=\"pageFooter\">\n                <FloatingButton\n                            text={`${this.state.isNewCovoit ? \"Valider\" : \"+\"} `}\n                            onClick={(data) => {this.handleClick(data)}}\n                />\n            </footer>\n      </div>\n        );\n        // return (\n        //     <div style={{paddingTop: '10px'}}>\n        //         <div id=\"pageHeader\">\n        //             <h1>Covoit App</h1>\n        //             {this.state.isNewCovoit &&\n        //             <button\n        //                 onClick={() => firebase.auth().signOut()}\n        //             >\n        //                 Sign-out\n        //             </button>}\n        //         </div>\n        //         <br/> <br/>\n                // {this.state.isSignedIn ? (\n                //     <div id=\"mainArticle\">\n                //         {this.state.isNewCovoit ?\n                //             <PageNewCovoit\n                //                 setPassengers={(data) => this.setPassengers(data)}\n                //                 setDate={(data) => this.setDate(data)}\n                //             />\n                //             :\n                //             <PageHistory covoits={this.getAllCovoits()}/>\n                //         }\n                //         <FloatingButton\n                //             id=\"pageFooter\"\n                //             text={`${this.state.isNewCovoit ? \"Valider\" : \"+\"} `}\n                //             onClick={(data) => {this.handleClick(data)}}\n                //         />\n                //     </div>\n                // ) : (\n                //     <div id=\"mainArticle\">\n                //         <StyledFirebaseAuth\n                //             uiConfig={uiConfig}\n                //             firebaseAuth={firebase.auth()}\n                //         />\n                //     </div>\n                // )}\n        //     </div>\n        // );\n    }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);"],"sourceRoot":""}