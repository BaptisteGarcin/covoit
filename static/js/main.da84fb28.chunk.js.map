{"version":3,"sources":["components/FloatingButton.js","components/Passengers.js","components/DatePicker.js","containers/PageNewCovoit.js","components/DrivingHistory.js","containers/PageHistory.js","containers/App.js","index.js"],"names":["FloatingButton","react_default","a","createElement","className","onClick","this","props","text","React","Component","Passengers","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","passengers","selectedPassengers","Map","name","e","_this2","item","target","value","isChecked","checked","setState","prevState","set","onChange","_this3","map","index","key","shortid","generate","handleClick","type","get","handleChange","DatePicker","event","PageNewCovoit","Passengers_Passengers","setPassengers","DatePicker_DatePicker","date","setDate","DrivingHistory","covoits","console","log","then","style","overflowX","covoit","driver","passenger","PageHistory","DrivingHistory_DrivingHistory","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","clientId","scopes","firebase","initializeApp","newCovoit","functions","httpsCallable","getAllCovoits","uiConfig","signInFlow","signInOptions","provider","auth","GoogleAuthProvider","PROVIDER_ID","EmailAuthProvider","callbacks","signInSuccessWithAuthResult","App","isSignedIn","isNewCovoit","undefined","unregisterAuthObserver","onAuthStateChanged","user","data","catch","err","error","snapshot","docs","doc","toConsumableArray","keys","save","_this4","id","signOut","PageNewCovoit_PageNewCovoit","PageHistory_PageHistory","StyledFirebaseAuth_default","firebaseAuth","FloatingButton_FloatingButton","concat","ReactDOM","render","containers_App","document","getElementById"],"mappings":"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","file":"static/js/main.da84fb28.chunk.js","sourcesContent":["import React from \"react\";\nimport './FloatingButton.scss';\n\nexport default class FloatingButton extends React.Component {\n    render() {\n        return (\n            <div\n                 className=\"float\"\n                 onClick={this.props.onClick}\n                 >\n                {this.props.text}\n            </div>\n        );\n    }\n}\n","import React from \"react\";\nimport './Passengers.scss'\nimport shortid from \"shortid\";\n\nexport default class Passengers extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            passengers: [\"Fedy\", \"Flo\", \"Lucille\", \"Spencer\", \"Baptiste\"],\n            selectedPassengers: new Map()\n        };\n    }\n\n    handleClick(name) {\n        //TODO : enlarge radio button to the div\n        //this.props.onChange(this.props.id, val);\n    }\n\n    handleChange(e) {\n        const item = e.target.value;\n        const isChecked = e.target.checked;\n        this.setState(prevState => ({selectedPassengers: prevState.selectedPassengers.set(item, isChecked)}),\n            () => this.props.onChange(this.state.selectedPassengers));\n    }\n\n    render() {\n        return (\n            <div className=\"flexRow\">\n                {this.state.passengers.map((value, index) =>{\n                  return <div className=\"passenger\" key={shortid.generate()} onClick={() => this.handleClick(value)}>\n                      <div className=\"flexRow\">\n                          <p>{value}</p>\n                      </div>\n                      <div className=\"flexRow\">\n                        <input\n                            type=\"checkbox\"\n                            name=\"passenger\"\n                            value={value}\n                            checked={this.state.selectedPassengers.get(value) ? this.state.selectedPassengers.get(value) : false}\n                            onChange={(e) => this.handleChange(e)}\n                        />\n                      </div>\n                  </div>\n                })}\n            </div>\n        );\n    }\n}\n","import React from \"react\";\n\nexport default class DatePicker extends React.Component {\n    render() {\n        return (\n            <div className=\"flexRow\">\n                <input type=\"date\" onChange={event => this.props.onChange(event.target.value) }/>\n            </div>\n        );\n    }\n}\n","import React from \"react\";\n\nimport Passengers from \"../components/Passengers\";\nimport DatePicker from \"../components/DatePicker\";\n\nimport './PageNewCovoit.scss'\n\nexport default class PageNewCovoit extends React.Component {\n    render() {\n        return (\n            <div className=\"flexColumn\">\n                <Passengers onChange={(selectedPassengers) => this.props.setPassengers(selectedPassengers)}/>\n                <DatePicker onChange={(date) => this.props.setDate(date)}/>\n            </div>\n        );\n    }\n}\n\n\n","import React from \"react\";\nimport shortid from 'shortid';\n\nimport './DrivingHistory.scss';\n\nexport default class DrivingHistory extends React.Component {\n    state = {\n        covoits: []\n    };\n\n\n    componentDidMount() {\n        console.log(this.props)\n        this.props.covoits.then(covoits => this.setState({covoits: covoits}), () => console.log(this.state.covoits))\n    }\n\n    render() {\n        return (\n            <div style={{overflowX: 'auto'}}>\n            <table>\n                <tbody>\n                    <tr>\n                        <th>Driver</th>\n                        <th>Passengers</th>\n                        <th>Date</th>\n                    </tr>\n                    {this.state.covoits.map((covoit, index) => {\n                      return <tr key={shortid.generate()}>\n                          <td>{covoit.driver}</td>\n                          <td>\n                          {covoit.passengers.map((passenger, index) => {\n                             return <p>{passenger}</p>\n                          })}\n                          </td>\n                          <td>{covoit.date}</td>\n                      </tr>\n                    })}\n                </tbody>\n            </table>\n            </div>\n        );\n    }\n}\n","import React from \"react\";\nimport DrivingHistory from \"../components/DrivingHistory\";\n\nexport default class PageHistory extends React.Component {\n    render() {\n        return (\n            <DrivingHistory covoits={this.props.covoits}/>\n        );\n    }\n}\n","// Import FirebaseAuth and firebase.\nimport React from \"react\";\nimport firebase from \"firebase\";\nimport StyledFirebaseAuth from \"react-firebaseui/StyledFirebaseAuth\";\n\nimport '../global.scss'\n\nimport FloatingButton from \"../components/FloatingButton\";\nimport PageNewCovoit from \"./PageNewCovoit\";\nimport PageHistory from \"./PageHistory\";\n\n// Configure Firebase.\nconst config = {\n    apiKey: \"AIzaSyBjsGZ5tLUZN9xlMVRoRsxLc0CjvOaL8oI\",\n    authDomain: \"covoit-84ccd.firebaseapp.com\",\n    databaseURL: \"https://covoit-84ccd.firebaseio.com\",\n    projectId: \"covoit-84ccd\",\n    storageBucket: \"\",\n    messagingSenderId: \"913586747610\",\n    appId: \"1:913586747610:web:0c6a504f06e498b42f4de3\",\n    measurementId: \"G-589J4F6WQJ\",\n    clientId:\n        \"424398156280-ia1vh1s44b7qqvm5kk61a5gako72kvb9.apps.googleusercontent.com\",\n    scopes: [\n        \"email\",\n        \"profile\",\n        \"openid\"\n    ]\n};\n\nfirebase.initializeApp(config);\n\nconst newCovoit = firebase.functions().httpsCallable('newCovoit');\nconst getAllCovoits = firebase.functions().httpsCallable('getAllCovoits');\n\n// Configure FirebaseUI.\nconst uiConfig = {\n    // Popup signin flow rather than redirect flow.\n    signInFlow: \"popup\",\n    // Redirect to /signedIn after sign in is successful. Alternatively you can provide a callbacks.signInSuccess function.\n    //signInSuccessUrl: \"/signedIn\",\n    // We will display Google and Facebook as auth providers.\n    signInOptions: [\n        {\n            provider: firebase.auth.GoogleAuthProvider.PROVIDER_ID,\n            scopes: config.scopes\n        },\n        firebase.auth.EmailAuthProvider.PROVIDER_ID\n    ],\n    callbacks: {\n        signInSuccessWithAuthResult: () => false\n    }\n};\n\nclass App extends React.Component {\n    state = {\n        isSignedIn: false,\n        isNewCovoit: false,\n        selectedPassengers: [],\n        date: undefined\n    };\n\n    componentDidMount() {\n        this.unregisterAuthObserver = firebase.auth().onAuthStateChanged(user => {\n            if (user) {\n                this.setState({isSignedIn: true});\n            } else {\n                this.setState({isSignedIn: false});\n            }\n        });\n    }\n\n    componentWillUnmount() {\n        this.unregisterAuthObserver();\n    }\n\n    save(){\n        const data = {\n            passengers: this.state.selectedPassengers,\n            date: this.state.date\n        };\n\n        newCovoit(data).then(() => {\n                this.setState({isNewCovoit: false})\n            }).catch(err => {\n                console.error('Error adding document', err);\n            });\n    }\n\n    getAllCovoits() {\n        const covoits = getAllCovoits()\n            .then(snapshot => {\n                return snapshot.docs.map(doc => {\n                    return doc.data();\n                });\n            }).catch(err => {\n                console.error('Error getting documents', err);\n            });\n\n        return covoits\n    }\n\n    setPassengers(selectedPassengers){\n        this.setState({selectedPassengers: [...selectedPassengers.keys()]})\n    }\n\n    setDate(date) {\n        this.setState({date: date})\n    }\n\n    handleClick(){\n        if(this.state.isNewCovoit){\n            this.save()\n        }\n        else\n            this.setState({isNewCovoit : true})\n    }\n\n    render() {\n        return (<div className=\"grid\">\n            <div id=\"header\">\n                <h1>Covoit App</h1>\n            </div>\n            <div id=\"headerRight\">\n                {this.state.isNewCovoit &&\n                            <button\n                                onClick={() => firebase.auth().signOut()}\n                            >\n                                Sign-out\n                            </button>\n                }\n            </div>\n            <div id=\"mainArticle\">\n                {this.state.isSignedIn ? (\n                    this.state.isNewCovoit ?\n                        <PageNewCovoit\n                            setPassengers={(data) => this.setPassengers(data)}\n                            setDate={(data) => this.setDate(data)}\n                        />\n                        :\n                        <PageHistory covoits={this.getAllCovoits()}/>\n                ) : (\n                    <StyledFirebaseAuth\n                        uiConfig={uiConfig}\n                        firebaseAuth={firebase.auth()}\n                    />\n                )}\n            </div>\n            <div id=\"mainNav\"></div>\n            <div id=\"siteAds\"></div>\n            <footer id=\"pageFooter\">\n                <FloatingButton\n                            text={`${this.state.isNewCovoit ? \"Valider\" : \"+\"} `}\n                            onClick={(data) => {this.handleClick(data)}}\n                />\n            </footer>\n      </div>\n        );\n    }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './containers/App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}